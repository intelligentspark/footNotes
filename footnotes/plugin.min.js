tinymce.PluginManager.add("footnotes",function(e){function t(e,t){var n=e;for(var o in t)n=n.replace(/({FOOTNOTE_INDEX})/g,t[o]);return n}function n(){var n=e.selection.getNode(),o="",a="SPAN"==n.tagName&&"fnoteWrap"===e.dom.getAttribute(n,"class");"fnoteWrap"==n.className?n.childNodes[0].firstChild.nodeValue.replace(/[^0-9]/g,""):n.childNodes[0];a&&(o=n.name||$(n.childNodes[0]).getParent().getAttribute("name")||""),e.windowManager.open({title:"Insert a contents",id:"footnote-dialog",body:{type:"textbox",name:"name",multiline:!0,minWidth:520,minHeight:100,value:o},onSubmit:function(n){var o;o=t('&nbsp;<span class="fnoteWrap" id="wk_ft{FOOTNOTE_INDEX}" data-footnote-id="{FOOTNOTE_INDEX}" contenteditable="false"><i class="fa fa-sticky-note" aria-hidden="true"></i><span class="fnoteDesc" style="display:none;">'+n.data.name+"</span></span>&nbsp;",{FOOTNOTE_INDEX:e.getDoc().querySelectorAll(".fnoteWrap").length+1}),e.selection.collapse(0),e.execCommand("mceInsertContent",!1,o)}})}e.addCommand("mceFootnotes",n),e.addButton("footnotes",{title:"footnote",image:tinyMCE.baseURL+"/plugins/footnotes/img/footnotes.png",onclick:n,stateSelector:"div.fnoteWrap"})});